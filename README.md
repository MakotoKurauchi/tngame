TNGame Library
======
Basic でゲームを作るための Arduino 用ライブラリです。



使い方
----
    #include "tngame.h"
    TNGame game ;
    void setup(void){
       game.init(8,8,30,2) ; // 画像サイズX、画像サイズY、フレームレート、SDカードのCSピン番号
       game.set_vfunc(test); // 画面データを受け取る関数を登録
       game.set_inkey(BTN_UP,BTN_DOWN,BTN_LEFT,BTN_RIGHT,BTN_A,BTN_B); // 入力ボタンを登録
    }
    void loop(void){
       game.run();
    }

プログラム方法
----
シリアル接続するとコマンドを打つためのプロンプトが表示されます。
行番号なしで直接コマンドを実行するダイレクトモードとして動作し、行番号を付けて入力することでプログラムを作ることができます。

自動起動
----
起動時にプログラムを自動的に動作させるには、下記のようにすることで、SDカードからプログラムを読み込み実行することが出来ます。

    // Basicコマンド
    game.command("load 0");
    game.command("run");

言語仕様
-------
###変数
|表記|意味|
|:-----------|:------------|
|A～Z|符号付整数（-32767～32767）|
|@(要素番号)|配列|

###ステートメント
|表記|機能|
|:-----------|:------------|
|IF|条件が成立したら同行の続きを実行する|
|FOR～TO～STEP～NEXT|回数を指定して繰り返す|
|GOTO|指定行へ分岐する|
|GOSUB～RETURN|指定行を呼び出す|
|REM|注釈|
|STOP|停止する|
|LET|変数に値を代入する|

###標準入出力
|表記|機能|
|:-----------|:------------|
|INPUT|入力を求める|
|PRINT|表示する|

###関数
|表記|機能|
|:-----------|:------------|
|RND(引数)|引数以下の乱数を返す|
|ABS(引数)|引数の絶対値を返す|
|SIZE()|メモリの残りの容量を返す（単位はバイト）|
|BUTTON(引数)|引数のボタンの状態を返す|

###グラフィック
|表記|機能|
|:-----------|:------------|
|GPSET x, y [,パレット]|ピクセルを打つ|
|GPRESET x, y|ピクセルを消す|
|GSPOIT x, y|指定座標の状態を返す|
|GCLS|全画面消去|

###時間
|表記|機能|
|:-----------|:------------|
|VSYNC|次のフレームまで待つ|
|WAIT|次のフレームまで待つ|

###ファイルコマンド
|表記|機能|
|:-----------|:------------|
|SAVE ファイル番号|プログラムを保存します|
|LOAD ファイル番号|プログラムを読み込みます|
ファイル番号は-32767～32767の整数になります。
SDカードには`ファイル番号.BAS`として保存されます。

###コマンド
|表記|機能|
|:-----------|:------------|
|NEW|プログラムと変数を初期化する|
|LIST|プログラムを表示する|
|RUN|プログラムを実行する|

   
###演算子
|優先順位|種類|演算子|
|:-----------|:------------|:------------|
|1|式|( )|
|2|剰余|* / %|
|3|加減|- +|
|4|シフト|<< >>|
|5|比較|>= <= > <|
|6|等値、非等値|== !=|
|7|論理積|&|
|8|排他的論理和|^|
|9|論理和|｜|
|10|論理積|&&|
|11|論理和|｜｜|


サンプルプログラム
---------------

###ドットが上から下に
    10 FOR Y=0 TO 7
    20 FOR X=0 TO 7
    30 GPSET X,Y
    40 WAIT 1
    50 NEXT X
    60 NEXT Y
    70 GCLS
    80 GOTO 10

###ボタン入力
    10 for i=0 to 5
    20 gpset i,0,button(i)
    30 next i
    40 goto 10

TNGame Libraryで動くゲーム
-----------------------
* [8x8ドット　ミサイルゲーム](https://github.com/MakotoKurauchi/dotgames/blob/master/missile.bas)
* [8x8ドット　テトリス](https://github.com/MakotoKurauchi/dotgames/blob/master/tetris.bas)